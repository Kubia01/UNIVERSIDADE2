# üéì Universidade Corporativa - Sistema de Treinamento

Um sistema completo de treinamento corporativo desenvolvido com **Next.js**, **Supabase** e **Vercel**, projetado para empresas que querem capacitar seus colaboradores com v√≠deos de treinamento.

## üöÄ Funcionalidades

- ‚úÖ **Autentica√ß√£o completa** (Login/Registro com Supabase Auth)
- ‚úÖ **Dashboard personalizado** para cada usu√°rio
- ‚úÖ **Sistema de cursos** com v√≠deos de treinamento
- ‚úÖ **Controle de progresso** dos usu√°rios
- ‚úÖ **Upload de v√≠deos** para o Supabase Storage
- ‚úÖ **Certificados** de conclus√£o
- ‚úÖ **Interface responsiva** e moderna
- ‚úÖ **Perfis de usu√°rio** com departamentos
- ‚úÖ **Sistema de n√≠veis** (Iniciante, Intermedi√°rio, Avan√ßado)

## üõ†Ô∏è Tecnologias Utilizadas

- **Frontend**: Next.js 14, React, TypeScript, Tailwind CSS
- **Backend**: Supabase (Database, Auth, Storage)
- **Deploy**: Vercel
- **UI**: Lucide React Icons
- **Estiliza√ß√£o**: Tailwind CSS com design system customizado

## üìã Pr√©-requisitos

Antes de come√ßar, voc√™ precisa ter:
- Node.js 18+ instalado
- Uma conta no [Supabase](https://supabase.com)
- Uma conta no [Vercel](https://vercel.com)
- Git instalado

## üîß Configura√ß√£o do Projeto

### 1. Clone o reposit√≥rio

```bash
git clone https://github.com/seu-usuario/universidade-corporativa.git
cd universidade-corporativa
```

### 2. Instale as depend√™ncias

```bash
npm install
```

### 3. Configure o Supabase

#### 3.1 Crie um novo projeto no Supabase
1. Acesse [supabase.com](https://supabase.com)
2. Clique em "New Project"
3. Escolha sua organiza√ß√£o
4. D√™ um nome ao projeto (ex: "universidade-corporativa")
5. Escolha uma senha forte para o banco
6. Selecione a regi√£o mais pr√≥xima
7. Clique em "Create new project"

#### 3.2 Configure as vari√°veis de ambiente
1. Copie o arquivo `.env.local.example` para `.env.local`
2. No dashboard do Supabase, v√° em **Settings > API**
3. Copie os valores e cole no seu `.env.local`:

```bash
# .env.local
NEXT_PUBLIC_SUPABASE_URL=https://seu-projeto.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=sua-chave-anonima
SUPABASE_SERVICE_ROLE_KEY=sua-chave-service-role
NEXT_PUBLIC_SITE_URL=http://localhost:3000
```

#### 3.3 Crie as tabelas no banco de dados

No Supabase, v√° em **SQL Editor** e execute os seguintes comandos:

```sql
-- Tabela de usu√°rios (perfis)
CREATE TABLE profiles (
  id UUID REFERENCES auth.users PRIMARY KEY,
  email TEXT UNIQUE NOT NULL,
  name TEXT NOT NULL,
  department TEXT,
  role TEXT DEFAULT 'user' CHECK (role IN ('user', 'admin')),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Tabela de cursos
CREATE TABLE courses (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  title TEXT NOT NULL,
  description TEXT,
  thumbnail TEXT,
  duration INTEGER DEFAULT 0,
  level TEXT DEFAULT 'beginner' CHECK (level IN ('beginner', 'intermediate', 'advanced')),
  category TEXT NOT NULL,
  created_by UUID REFERENCES auth.users,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  is_published BOOLEAN DEFAULT false
);

-- Tabela de v√≠deos
CREATE TABLE videos (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  course_id UUID REFERENCES courses(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  description TEXT,
  video_url TEXT NOT NULL,
  duration INTEGER DEFAULT 0,
  order_index INTEGER DEFAULT 0,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Tabela de progresso do usu√°rio
CREATE TABLE user_progress (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users,
  video_id UUID REFERENCES videos(id) ON DELETE CASCADE,
  course_id UUID REFERENCES courses(id) ON DELETE CASCADE,
  completed BOOLEAN DEFAULT false,
  progress_percentage INTEGER DEFAULT 0,
  last_watched_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(user_id, video_id)
);

-- Tabela de certificados
CREATE TABLE certificates (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users,
  course_id UUID REFERENCES courses(id) ON DELETE CASCADE,
  issued_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  certificate_url TEXT
);

-- Habilitar RLS (Row Level Security)
ALTER TABLE profiles ENABLE ROW LEVEL SECURITY;
ALTER TABLE courses ENABLE ROW LEVEL SECURITY;
ALTER TABLE videos ENABLE ROW LEVEL SECURITY;
ALTER TABLE user_progress ENABLE ROW LEVEL SECURITY;
ALTER TABLE certificates ENABLE ROW LEVEL SECURITY;

-- Pol√≠ticas de seguran√ßa
-- Perfis
CREATE POLICY "Users can view all profiles" ON profiles FOR SELECT USING (true);
CREATE POLICY "Users can update own profile" ON profiles FOR UPDATE USING (auth.uid() = id);
CREATE POLICY "Users can insert own profile" ON profiles FOR INSERT WITH CHECK (auth.uid() = id);

-- Cursos
CREATE POLICY "Anyone can view published courses" ON courses FOR SELECT USING (is_published = true);
CREATE POLICY "Admins can manage courses" ON courses FOR ALL USING (
  EXISTS (
    SELECT 1 FROM profiles 
    WHERE profiles.id = auth.uid() 
    AND profiles.role = 'admin'
  )
);

-- V√≠deos
CREATE POLICY "Anyone can view videos of published courses" ON videos FOR SELECT USING (
  EXISTS (
    SELECT 1 FROM courses 
    WHERE courses.id = videos.course_id 
    AND courses.is_published = true
  )
);

-- Progresso do usu√°rio
CREATE POLICY "Users can view own progress" ON user_progress FOR SELECT USING (auth.uid() = user_id);
CREATE POLICY "Users can update own progress" ON user_progress FOR ALL USING (auth.uid() = user_id);

-- Certificados
CREATE POLICY "Users can view own certificates" ON certificates FOR SELECT USING (auth.uid() = user_id);
```

#### 3.4 Configure o Storage para v√≠deos

1. No Supabase, v√° em **Storage**
2. Clique em "Create bucket"
3. Nome do bucket: `videos`
4. Deixe p√∫blico: `false` (privado)
5. Clique em "Create bucket"

Agora configure as pol√≠ticas do Storage:

```sql
-- Pol√≠tica para upload de v√≠deos (apenas admins)
CREATE POLICY "Admins can upload videos" ON storage.objects FOR INSERT WITH CHECK (
  bucket_id = 'videos' AND
  EXISTS (
    SELECT 1 FROM profiles 
    WHERE profiles.id = auth.uid() 
    AND profiles.role = 'admin'
  )
);

-- Pol√≠tica para visualizar v√≠deos (usu√°rios autenticados)
CREATE POLICY "Authenticated users can view videos" ON storage.objects FOR SELECT USING (
  bucket_id = 'videos' AND auth.role() = 'authenticated'
);
```

#### 3.5 Configure a autentica√ß√£o

1. No Supabase, v√° em **Authentication > Settings**
2. Em **Site URL**, adicione: `http://localhost:3000`
3. Em **Redirect URLs**, adicione: `http://localhost:3000/auth/callback`
4. Salve as configura√ß√µes

### 4. Execute o projeto localmente

```bash
npm run dev
```

Acesse [http://localhost:3000](http://localhost:3000) para ver o sistema funcionando.

## üöÄ Deploy na Nuvem

### 1. Deploy no Vercel

#### 1.1 Prepare o projeto para produ√ß√£o

1. Fa√ßa commit de todas as altera√ß√µes:
```bash
git add .
git commit -m "Configura√ß√£o inicial do projeto"
git push origin main
```

#### 1.2 Deploy no Vercel

1. Acesse [vercel.com](https://vercel.com)
2. Clique em "New Project"
3. Conecte seu reposit√≥rio do GitHub
4. Selecione o projeto
5. Configure as vari√°veis de ambiente:
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
   - `SUPABASE_SERVICE_ROLE_KEY`
   - `NEXT_PUBLIC_SITE_URL` (ser√° algo como `https://seu-projeto.vercel.app`)

6. Clique em "Deploy"

#### 1.3 Atualize as configura√ß√µes do Supabase

Ap√≥s o deploy, voc√™ ter√° uma URL do Vercel. Atualize no Supabase:

1. V√° em **Authentication > Settings**
2. Atualize **Site URL** para: `https://seu-projeto.vercel.app`
3. Adicione em **Redirect URLs**: `https://seu-projeto.vercel.app/auth/callback`

### 2. Configure o dom√≠nio customizado (opcional)

1. No Vercel, v√° em **Settings > Domains**
2. Adicione seu dom√≠nio personalizado
3. Configure o DNS conforme instru√ß√µes do Vercel
4. Atualize as URLs no Supabase

## üë• Como Usar o Sistema

### Para Administradores

1. **Primeiro acesso**: Registre-se no sistema
2. **Tornar-se admin**: Execute no SQL Editor do Supabase:
```sql
UPDATE profiles SET role = 'admin' WHERE email = 'seu-email@empresa.com';
```

3. **Adicionar cursos**: Crie cursos atrav√©s do painel administrativo
4. **Upload de v√≠deos**: Fa√ßa upload dos v√≠deos de treinamento
5. **Publicar cursos**: Torne os cursos vis√≠veis para os usu√°rios

### Para Colaboradores

1. **Registro**: Cada colaborador deve se registrar com email corporativo
2. **Acesso**: Login no sistema
3. **Cursos**: Visualizar e assistir cursos dispon√≠veis
4. **Progresso**: Acompanhar progresso dos treinamentos
5. **Certificados**: Baixar certificados de conclus√£o

## üìä Funcionalidades Avan√ßadas

### Sistema de N√≠veis
- **Iniciante**: Cursos b√°sicos
- **Intermedi√°rio**: Cursos de n√≠vel m√©dio
- **Avan√ßado**: Cursos especializados

### Controle de Progresso
- Progresso por v√≠deo
- Progresso por curso
- Tempo total de estudo
- Certificados emitidos

### Departamentos
- Segmenta√ß√£o por departamento
- Cursos espec√≠ficos por √°rea
- Relat√≥rios por departamento

## üîí Seguran√ßa

- **Autentica√ß√£o**: Supabase Auth com JWT
- **Autoriza√ß√£o**: Row Level Security (RLS)
- **Dados**: Criptografados em tr√¢nsito e repouso
- **V√≠deos**: Armazenamento seguro no Supabase Storage

## üìà Escalabilidade

O sistema foi projetado para crescer com sua empresa:

- **Usu√°rios**: Suporta milhares de usu√°rios simult√¢neos
- **V√≠deos**: Armazenamento ilimitado no Supabase
- **Performance**: CDN global do Vercel
- **Banco de dados**: PostgreSQL escal√°vel

## üÜò Suporte e Solu√ß√£o de Problemas

### Problemas Comuns

1. **Erro de autentica√ß√£o**: Verifique as URLs no Supabase
2. **V√≠deos n√£o carregam**: Verifique as pol√≠ticas do Storage
3. **Erro 500**: Verifique as vari√°veis de ambiente
4. **Lentid√£o**: Otimize imagens e v√≠deos

### Logs e Debugging

- **Vercel**: Veja logs em tempo real no dashboard
- **Supabase**: Monitore queries no painel
- **Browser**: Use DevTools para debug frontend

## üîÑ Atualiza√ß√µes e Manuten√ß√£o

### Backup dos Dados
```bash
# Backup do banco via Supabase CLI
supabase db dump --local > backup.sql
```

### Atualiza√ß√µes do Sistema
```bash
# Atualize depend√™ncias
npm update

# Deploy nova vers√£o
git push origin main
```

## üìû Contato e Suporte

Para d√∫vidas ou suporte:
- üìß Email: suporte@suaempresa.com
- üí¨ Slack: #universidade-corporativa
- üìñ Wiki: Documenta√ß√£o interna

---

## üéØ Pr√≥ximos Passos

Ap√≥s configurar o sistema b√°sico, voc√™ pode:

1. **Personalizar o design** com cores da empresa
2. **Adicionar relat√≥rios** de progresso
3. **Integrar com sistemas** existentes
4. **Criar notifica√ß√µes** por email
5. **Implementar gamifica√ß√£o** (pontos, badges)

**Parab√©ns! üéâ Seu sistema de Universidade Corporativa est√° pronto para uso!**

---

*Desenvolvido com ‚ù§Ô∏è para capacitar equipes e impulsionar o crescimento profissional.*